package com.tjoeun.dbTest;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Scanner;

import com.tjoeun.DBUtil;

public class InsertTest2 {

	public static void main(String[] args) {
		

		Scanner scanner = new Scanner(System.in);
		System.out.print("이름: ");
		String name = scanner.nextLine().trim();
		System.out.print("비밀번호: ");
		String password = scanner.nextLine().trim();
		System.out.print("메모: ");
		String memo = scanner.nextLine().trim();
		
		Connection conn = null;
		Statement stmt = null;
		PreparedStatement pstmt = null;
		
		conn = DBUtil.getMySQLConnection();
		
//		if(conn != null) {
//			try {
//			String sql = String.format("insert into memo(name, password, memo) values ('%s', '%s', '%s')", name, password, memo);
//			System.out.println(sql);
//			stmt = conn.createStatement();
//			stmt.executeUpdate(sql);
//		} catch (SQLException e) {
//			e.printStackTrace();
//		}
//		} else {
//			System.out.println("연결실패");
//		}
		
		conn = DBUtil.getMySQLConnection();
		if(conn != null) {
			try {
			
		String sql = "insert into memo(name, password, memo) values (?, ?, ?)";
		
			pstmt = conn.prepareStatement(sql);
			pstmt.setString(1, name);
			pstmt.setString(2, password);
			pstmt.setString(4, memo);
			pstmt.executeUpdate();
			System.out.println("저장완료");
			
			
		} catch (SQLException e) {
			e.printStackTrace();
		}
			
		} else {
			System.out.println("연결실패");
		}
	}
}
